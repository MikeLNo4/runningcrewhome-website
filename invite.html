<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags - Will be dynamically updated by JS -->
    <title>Run Invitation - RunningCrewHome</title>
    <meta name="description" content="Du wurdest zu einem Run eingeladen! Sieh dir die Details an und lade die RunningCrewHome App, um dabei zu sein.">

    <!-- Open Graph / Facebook - Placeholders for social sharing -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.runningcrewhome.com/invite.html">
    <meta property="og:title" content="Run Invitation - RunningCrewHome">
    <meta property="og:description" content="Du wurdest zu einem Run eingeladen!">
    <meta property="og:image" content="https://www.runningcrewhome.com/logo.png">
    <meta property="og:site_name" content="RunningCrewHome">
    <meta property="og:locale" content="de_DE">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.runningcrewhome.com/invite.html">
    <meta name="twitter:title" content="Run Invitation - RunningCrewHome">
    <meta name="twitter:description" content="Du wurdest zu einem Run eingeladen!">
    <meta name="twitter:image" content="https://www.runningcrewhome.com/logo.png">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <!-- App Store Smart Banner -->
    <meta name="apple-itunes-app" content="app-id=6756790104">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="invite.css">

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc, collection } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDhe6TRIQkSOGhzeZYZjY6S62HcCJglwFQ",
            authDomain: "running-crew-cloud.firebaseapp.com",
            projectId: "running-crew-cloud",
            storageBucket: "running-crew-cloud.firebasestorage.app",
            messagingSenderId: "1067220284546",
            appId: "1:1067220284546:web:invite"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make db available globally for invite.js
        window.firebaseDb = db;
        window.firebaseDoc = doc;
        window.firebaseGetDoc = getDoc;
        window.firebaseCollection = collection;

        // Signal that Firebase is ready
        window.dispatchEvent(new Event('firebase-ready'));
    </script>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="RunningCrewHome" width="200" height="60" loading="eager">
            </a>
            <ul class="nav-links">
                <li><a href="index.html#features">Features</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="invite-page">
        <div class="container">
            <!-- Loading State -->
            <div id="loading-state" class="invite-loading">
                <div class="loading-spinner"></div>
                <p>Einladung wird geladen...</p>
            </div>

            <!-- Error State -->
            <div id="error-state" class="invite-error" style="display: none;">
                <div class="error-icon">üòï</div>
                <h2>Einladung nicht gefunden</h2>
                <p id="error-message">Diese Einladung existiert nicht oder ist abgelaufen.</p>
                <a href="index.html" class="btn btn-primary">Zur Startseite</a>
            </div>

            <!-- Invite Content -->
            <div id="invite-content" class="invite-card" style="display: none;">
                <!-- Crew Header -->
                <div class="invite-header">
                    <img id="crew-logo" src="logo.png" alt="Crew Logo" class="crew-logo">
                    <div class="crew-info">
                        <span id="crew-name" class="crew-name">Running Crew</span>
                        <span class="invite-label">l√§dt dich ein:</span>
                    </div>
                </div>

                <!-- Invite Title -->
                <h1 id="invite-title" class="invite-title">Run with me</h1>

                <!-- Description (optional) -->
                <p id="invite-description" class="invite-description" style="display: none;"></p>

                <!-- Invite Details -->
                <div class="invite-details">
                    <!-- Date & Time -->
                    <div class="detail-row">
                        <div class="detail-icon">üìÖ</div>
                        <div class="detail-content">
                            <div class="detail-label">Datum & Uhrzeit</div>
                            <div id="invite-datetime" class="detail-value">-</div>
                        </div>
                    </div>

                    <!-- Meeting Point (optional) -->
                    <div id="meeting-point-row" class="detail-row" style="display: none;">
                        <div class="detail-icon">üìç</div>
                        <div class="detail-content">
                            <div class="detail-label">Treffpunkt</div>
                            <div id="invite-meeting-point" class="detail-value">-</div>
                        </div>
                    </div>

                    <!-- Distance (optional) -->
                    <div id="distance-row" class="detail-row" style="display: none;">
                        <div class="detail-icon">üìè</div>
                        <div class="detail-content">
                            <div class="detail-label">Distanz</div>
                            <div id="invite-distance" class="detail-value">-</div>
                        </div>
                    </div>

                    <!-- Pace (optional) -->
                    <div id="pace-row" class="detail-row" style="display: none;">
                        <div class="detail-icon">‚ö°Ô∏è</div>
                        <div class="detail-content">
                            <div class="detail-label">Pace</div>
                            <div id="invite-pace" class="detail-value">-</div>
                        </div>
                    </div>

                    <!-- Route (optional) -->
                    <div id="route-row" class="detail-row" style="display: none;">
                        <div class="detail-icon">üó∫Ô∏è</div>
                        <div class="detail-content">
                            <div class="detail-label">Route</div>
                            <div id="invite-route" class="detail-value">-</div>
                        </div>
                    </div>
                </div>

                <!-- Status Badge (for expired/cancelled) -->
                <div id="invite-status" class="invite-status" style="display: none;">
                    <span id="status-text">Abgelaufen</span>
                </div>

                <!-- CTA Section -->
                <div class="invite-cta">
                    <p class="cta-text">Lade die App, um zuzusagen und alle Details zu sehen!</p>
                    <a href="https://apps.apple.com/de/app/runningcrewhome/id6756790104" class="btn btn-primary btn-large">
                        <span class="app-icon">üì±</span>
                        App herunterladen (iOS)
                    </a>
                </div>

                <!-- Creator Info -->
                <div id="creator-info" class="creator-info">
                    <span>Eingeladen von <strong id="creator-name">-</strong></span>
                </div>
            </div>

            <!-- App Download Banner (fixed bottom) -->
            <div class="app-download-banner">
                <div class="banner-content">
                    <div class="banner-icon">üèÉ</div>
                    <div class="banner-text">
                        <strong>RunningCrewHome</strong>
                        <span>Dein Running Crew Management</span>
                    </div>
                </div>
                <a href="https://apps.apple.com/de/app/runningcrewhome/id6756790104" class="banner-btn">App laden</a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="invite-footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 RunningCrewHome. All rights reserved.</p>
                <div class="footer-links">
                    <a href="privacy.html">Datenschutz</a>
                    <a href="terms.html">AGB</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Load invite.js after Firebase is ready -->
    <script src="invite.js"></script>
</body>
</html>
